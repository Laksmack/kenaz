@import '@futhark/core/styles/theme.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Dagaz dark blue-gray theme — "twilight sky" */
  :root, [data-theme='dark'] {
    --bg-primary: 13 21 32;
    --bg-secondary: 17 27 40;
    --bg-tertiary: 22 34 50;
    --bg-hover: 20 32 48;
    --text-primary: 232 228 224;
    --text-secondary: 148 160 176;
    --text-muted: 88 100 120;
    --border-subtle: 28 40 56;
    --border-active: 74 154 194;
    --accent-deep: 45 95 138;
    --accent-primary: 74 154 194;
    --accent-warm: 122 184 212;
    --accent-light: 240 244 255;

    /* Cross-app semantic colors */
    --color-urgency: #E8834A;   /* Kenaz orange — conflicts, overdue */
    --color-current: #C2885A;   /* Raidō brown — today indicator */
    --color-scheduled: #4A9AC2; /* Dagaz blue — selected, interactive */
    --color-reference: #4AA89A; /* Laguz teal — linked, cross-ref */

    /* Calendar-specific */
    --time-marker: #4A9AC2;
    --event-default: #4A9AC2;
    --event-allday: rgba(74, 154, 194, 0.15);
    --drag-ghost: rgba(74, 154, 194, 0.3);
    --hour-line: rgba(255, 255, 255, 0.04);
    --now-line: #E8834A;
  }

  [data-theme='light'] {
    --accent-deep: 45 95 138;
    --accent-primary: 58 127 165;
    --accent-warm: 100 160 190;
    --border-active: 58 127 165;

    --color-urgency: #D06A2E;
    --color-current: #A87548;
    --color-scheduled: #3A7FA5;
    --color-reference: #3A8A7E;

    --time-marker: #3A7FA5;
    --now-line: #D06A2E;
    --hour-line: rgba(0, 0, 0, 0.06);
  }
}

/* ── Dagaz-specific component styles ─────────────────── */
@layer components {
  .event-block {
    @apply rounded-md px-1.5 py-0.5 text-xs cursor-pointer transition-all duration-100 overflow-hidden;
    border-left: 3px solid var(--event-color, rgb(var(--accent-primary)));
    background: color-mix(in srgb, var(--event-color, rgb(var(--accent-primary))) 15%, transparent);
    line-height: 1.3;
  }

  .event-block:hover {
    background: color-mix(in srgb, var(--event-color, rgb(var(--accent-primary))) 25%, transparent);
  }

  .event-block.selected {
    background: color-mix(in srgb, var(--event-color, rgb(var(--accent-primary))) 30%, transparent);
    box-shadow: 0 0 0 1px var(--event-color, rgb(var(--accent-primary)));
  }

  .event-block.event-invite {
    border-left: 3px dashed var(--event-color, rgb(var(--accent-primary)));
    background: color-mix(in srgb, var(--event-color, rgb(var(--accent-primary))) 8%, transparent);
  }

  .event-block.event-invite:hover {
    background: color-mix(in srgb, var(--event-color, rgb(var(--accent-primary))) 18%, transparent);
  }

  .event-block.all-day {
    border-left: none;
    @apply rounded-sm py-0.5;
    background: var(--event-allday);
  }

  .hour-slot {
    border-bottom: 1px solid var(--hour-line);
    min-height: 60px;
  }

  .now-indicator {
    position: absolute;
    left: 0;
    right: 0;
    height: 2px;
    background: var(--now-line);
    z-index: 20;
  }

  .now-indicator::before {
    content: '';
    position: absolute;
    left: -4px;
    top: -3px;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--now-line);
  }

  .mini-cal-day {
    @apply w-7 h-7 flex items-center justify-center rounded-full text-xs cursor-pointer transition-colors;
  }

  .mini-cal-day:hover {
    @apply bg-bg-hover;
  }

  .mini-cal-day.today {
    background: rgb(var(--accent-primary));
    color: white;
    font-weight: 600;
  }

  .mini-cal-day.selected {
    border: 1px solid rgb(var(--accent-primary));
  }

  .mini-cal-day.has-events::after {
    content: '';
    position: absolute;
    bottom: 2px;
    width: 3px;
    height: 3px;
    border-radius: 50%;
    background: rgb(var(--accent-primary));
  }

  .mini-cal-day.other-month {
    @apply text-text-muted opacity-40;
  }

  .brand-gradient {
    background: linear-gradient(135deg, rgb(var(--accent-deep)), rgb(var(--accent-warm)));
  }

  .sidebar-item {
    @apply flex items-center gap-3 px-4 py-2 rounded-lg cursor-pointer transition-colors duration-100 text-sm;
  }

  .sidebar-item:hover {
    @apply bg-bg-hover;
  }

  .sidebar-item.active {
    @apply bg-bg-tertiary font-semibold;
  }

  .shortcut-key {
    @apply inline-flex items-center justify-center min-w-[22px] h-[22px] px-1 text-[10px] font-mono rounded bg-bg-tertiary text-text-secondary border border-border-subtle;
  }

  .view-tab {
    @apply px-3 py-1.5 text-xs rounded-md cursor-pointer transition-colors;
    color: rgb(var(--text-secondary));
  }
  .view-tab:hover {
    color: rgb(var(--text-primary));
    background: rgb(var(--bg-hover));
  }
  .view-tab.active {
    color: rgb(var(--accent-primary));
    background: rgb(var(--accent-primary) / 0.1);
    font-weight: 500;
  }

  .prose-links a {
    color: rgb(var(--accent-primary));
    text-decoration: underline;
    text-underline-offset: 2px;
  }
  .prose-links a:hover {
    opacity: 0.8;
  }

  .drag-ghost {
    background: var(--drag-ghost);
    border: 1px dashed rgb(var(--accent-primary));
    @apply rounded-md;
  }
}

/* ── Scrollbar styling ────────────────────────────────── */
.scrollbar-thin::-webkit-scrollbar {
  width: 6px;
}
.scrollbar-thin::-webkit-scrollbar-track {
  background: transparent;
}
.scrollbar-thin::-webkit-scrollbar-thumb {
  background: var(--scrollbar-thumb);
  border-radius: 3px;
}
.scrollbar-thin::-webkit-scrollbar-thumb:hover {
  background: var(--scrollbar-thumb-hover);
}
